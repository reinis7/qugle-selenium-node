<% const body=` <div class="user-detail-header">
    <a href="/user-manager/users" class="back-btn">‚Üê Back to Users</a>
    <h1>User Details</h1>
    </div>
    <div class="user-detail-container">
        <!-- User Basic Information -->
        <div class="user-info-card">
            <h2>Basic Information</h2>
            <div class="user-info-grid">
                <div class="info-item">
                    <label>User ID:</label>
                    <span>${userDetail.userId}</span>
                </div>
                <div class="info-item">
                    <label>Email:</label>
                    <span>${userDetail.email}</span>
                </div>
                <div class="info-item">
                    <label>Status:</label>
                    <span class="status-badge status-${userDetail.status.toLowerCase()}">
                        ${userDetail.status}
                    </span>
                </div>
                <div class="info-item">
                    <label>Language:</label>
                    <span>${userDetail.lang}</span>
                </div>
                <div class="info-item">
                    <label>User Agent:</label>
                    <span class="user-agent">${userDetail.userAgent}</span>
                </div>
                <div class="info-item">
                    <label>Created At:</label>
                    <span>
                        ${(userDetail.createdAt) ? new Date(userDetail.createdAt).toLocaleString() : 'Unknown'}
                    </span>
                </div>
            </div>
        </div>

        <!-- User Activity Logs -->
        <div class="section-card">
            <h2>Activity Logs</h2>
            <div class="logs-table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Action</th>
                            <th>Timestamp</th>
                            <th>IP Address</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${logs.map(log=>
                        `<tr>
                            <td>${log.action}</td>
                            <td>${log.timestamp.toLocaleString()}</td>
                            <td>${log.ip}</td>
                        </tr>`
                        ).join('')} </tbody>
                </table>
            </div>
        </div>

        <!-- User Files -->
        <div class="section-card">
            <h2>Uploaded Files</h2>
            ${hasFiles? `<div class="files-grid">
                ${files.map(file=>
                `<div class="file-card">
                    <div class="file-icon">üìÑ</div>
                    <div class="file-info">
                        <div class="file-name">${file.name}</div>
                        <div class="file-details">
                            <span>${file.type}</span>
                            <span>${file.size}</span>
                        </div>
                        <div class="file-date">Uploaded: ${file.uploaded.toLocaleString()}</div>
                    </div>
                    <div class="file-actions">
                        <a href="/user-manager/download/${userDetail.userId}/files/${file.name}" class="btn-download"
                            download>Download</a>
                    </div>
                </div>`
                ).join()}
            </div>
            `: `<div class="no-data">
                <p>No files found for this user.</p>
                <p>Files should be located in: <code>logs/${userDetail.userId}/files/</code></p>
            </div>
            `}
        </div>

        <div class="section-card">
            <h2>Uploaded Images</h2>
            ${hasImages? `
            <div class="images-grid">
                ${images.map(image=>
                `<div class="image-card">
                    <div class="image-preview">
                        <div class="image-placeholder">
                            <img src="/user-manager/logs/${userDetail.userId}/images/${image.name}" alt="${image.name}"
                                style="max-width: 100%; max-height: 150px; object-fit: contain;">
                        </div>
                        <div class="image-name">${image.name}</div>
                    </div>
                    <div class="image-info">
                        <div class="image-details">
                            <span>Size: ${image.size}</span>
                            <span>Type: ${image.extension.toUpperCase()}</span>
                            <span>Uploaded: ${image.uploaded.toLocaleString()}</span>
                        </div>
                    </div>
                    <div class="image-actions">
                        <a href="/user-manager/logs/${userDetail.userId}/images/${image.name}" target="_blank"
                            class="btn-view">View</a>
                        <a href="/user-manager/download/${userDetail.userId}/images/${image.name}" class="btn-download"
                            download>Download</a>
                    </div>
                </div>
                `
                ).join('')}
            </div>
            `:`<div class="no-data">
                <p>No images found for this user.</p>
                <p>Images should be located in: <code>logs/${userDetail.userId}/images/</code></p>
            </div>`
            }
        </div>


    </div>
    `;
    %>
    <%- include('layout', { title, body, user }); %>